Building DAG of jobs...
Using shell: /cluster/apps/sfos/bin/bash
Provided cores: 1
Rules claiming more threads will be scaled down.
Job counts:
	count	jobs
	1	all
	1	prepare_train_test_data
	1	sequence_data_prep
	3

[Sun Dec 31 19:13:34 2023]
rule sequence_data_prep:
    input: /cluster/scratch/hugifl/spacer_coverage_final_data/Diet2_window_3200_overlap_1600_no_binning_gene_normalized_data/window_coverage_data_summed.csv
    output: /cluster/scratch/hugifl/spacer_coverage_final_data/Diet2_window_3200_overlap_1600_no_binning_gene_normalized_data/XY_data_Y_with_windows.npz
    jobid: 2

[33mBuilding DAG of jobs...[0m
[33mUsing shell: /cluster/apps/sfos/bin/bash[0m
[33mProvided cores: 1 (use --cores to define parallelism)[0m
[33mRules claiming more threads will be scaled down.[0m
[33mSelect jobs to execute...[0m
start building sequence dataset
Traceback (most recent call last):
  File "sequence_data_prep.py", line 71, in <module>
    X = extract_sequences_and_sequence_info(coverage_df_summed, genome, window_size, gene_df, promoter_df, terminator_df, TU_df)
  File "/cluster/home/hugifl/spacer_coverage_prediction/utils_sequence.py", line 57, in extract_sequences_and_sequence_info
    if TU_row['TU_start'] == 'None' or gene_row['TU_end']  == 'None':
UnboundLocalError: local variable 'gene_row' referenced before assignment
[32m[Sun Dec 31 19:13:38 2023][0m
[31mError in rule sequence_data_prep:
    jobid: 0
    input: /cluster/scratch/hugifl/spacer_coverage_final_data/Diet2_window_3200_overlap_1600_no_binning_gene_normalized_data/window_coverage_data_summed.csv
    output: /cluster/scratch/hugifl/spacer_coverage_final_data/Diet2_window_3200_overlap_1600_no_binning_gene_normalized_data/XY_data_Y_with_windows.npz
[0m
[31mRuleException:
CalledProcessError in file /cluster/home/hugifl/spacer_coverage_prediction/Snakefile, line 88:
Command 'set -euo pipefail;  python sequence_data_prep.py                     --promoters ../spacer_coverage_input/ECOCYC_promoters.txt --terminators ../spacer_coverage_input/ECOCYC_terminators.txt                     --genes ../spacer_coverage_input/ECOCYC_genes.txt --TUs ../spacer_coverage_input/TU_start_end_added_promoters_updated.tsv --outPath /cluster/scratch/hugifl/spacer_coverage_final_data/Diet2_window_3200_overlap_1600_no_binning_gene_normalized_data/ --winwidth 3200                     --genomelen 4641652 --genome ../spacer_coverage_input/U00096.3.fasta                     --overlap 1600 --coverage_df /cluster/scratch/hugifl/spacer_coverage_final_data/Diet2_window_3200_overlap_1600_no_binning_gene_normalized_data/window_coverage_data_summed.csv' returned non-zero exit status 1.
  File "/cluster/home/hugifl/spacer_coverage_prediction/Snakefile", line 88, in __rule_sequence_data_prep
  File "/cluster/apps/nss/python/3.7.4/x86_64/lib64/python3.7/concurrent/futures/thread.py", line 57, in run[0m
[33mShutting down, this might take some time.[0m
[31mExiting because a job execution failed. Look above for error message[0m
Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: /cluster/home/hugifl/spacer_coverage_prediction/.snakemake/log/2023-12-31T191333.962431.snakemake.log
